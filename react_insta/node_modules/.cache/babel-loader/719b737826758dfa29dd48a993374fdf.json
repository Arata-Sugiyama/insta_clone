{"ast":null,"code":"var _jsxFileName = \"/Users/sugiyamaarata/Documents/insta_app/react_insta/src/features/core/EditProfile.tsx\";\nimport React, { useState } from \"react\";\nimport Modal from \"react-modal\";\nimport styles from \"./Core.module.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { editNickname, selectProfile, selectOpenProfile, resetOpenProfile, fetchCredStart, fetchCredEnd, fetchAsyncUpdateProf } from \"../auth/authSlice\";\nimport { Button, TextField, IconButton } from \"@material-ui/core\";\nimport { MdAddAPhoto } from \"react-icons/md\";\nconst customStyles = {\n  content: {\n    top: \"55%\",\n    left: \"50%\",\n    width: 280,\n    height: 220,\n    padding: \"50px\",\n    transform: \"translate(-50%, -50%)\"\n  }\n};\n\nconst EditProfile = () => {\n  const dispatch = useDispatch();\n  const openProfile = useSelector(selectOpenProfile);\n  const profile = useSelector(selectProfile);\n  const [image, setImage] = useState(null);\n\n  const updateProfile = async e => {\n    e.preventDefault();\n    const packet = {\n      id: profile.id,\n      nickName: profile.nickName,\n      img: image\n    };\n    await dispatch(fetchCredStart());\n    await dispatch(fetchAsyncUpdateProf(packet));\n    await dispatch(fetchCredEnd());\n    await dispatch(resetOpenProfile());\n  };\n\n  const handlerEditPicture = () => {\n    const fileInput = document.getElementById(\"imageInput\");\n    fileInput === null || fileInput === void 0 ? void 0 : fileInput.click();\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    isOpen: openProfile,\n    onRequestClose: async () => {\n      await dispatch(resetOpenProfile());\n    },\n    style: customStyles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: styles.core_signUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.core_title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 11\n    }\n  }, \"SNS clone\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    placeholder: \"nickname\",\n    type: \"text\",\n    value: profile === null || profile === void 0 ? void 0 : profile.nickName,\n    onChange: e => dispatch(editNickname(e.target.value)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    id: \"imageInput\",\n    hidden: true,\n    onChange: e => setImage(e.target.files[0]),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(IconButton, {\n    onClick: handlerEditPicture,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(MdAddAPhoto, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    disabled: !(profile === null || profile === void 0 ? void 0 : profile.nickName),\n    variant: \"contained\",\n    color: \"primary\",\n    type: \"submit\",\n    onClick: updateProfile,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, \"Update\"))));\n};\n\nexport default EditProfile;","map":{"version":3,"sources":["/Users/sugiyamaarata/Documents/insta_app/react_insta/src/features/core/EditProfile.tsx"],"names":["React","useState","Modal","styles","useSelector","useDispatch","editNickname","selectProfile","selectOpenProfile","resetOpenProfile","fetchCredStart","fetchCredEnd","fetchAsyncUpdateProf","Button","TextField","IconButton","MdAddAPhoto","customStyles","content","top","left","width","height","padding","transform","EditProfile","dispatch","openProfile","profile","image","setImage","updateProfile","e","preventDefault","packet","id","nickName","img","handlerEditPicture","fileInput","document","getElementById","click","core_signUp","core_title","target","value","files"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Modal from \"react-modal\";\nimport styles from \"./Core.module.css\";\n\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { AppDispatch } from \"../../app/store\";\n\nimport { File } from \"../types\";\n\nimport {\n  editNickname,\n  selectProfile,\n  selectOpenProfile,\n  resetOpenProfile,\n  fetchCredStart,\n  fetchCredEnd,\n  fetchAsyncUpdateProf,\n} from \"../auth/authSlice\";\n\nimport { Button, TextField, IconButton } from \"@material-ui/core\";\nimport { MdAddAPhoto } from \"react-icons/md\";\n\nconst customStyles = {\n  content: {\n    top: \"55%\",\n    left: \"50%\",\n\n    width: 280,\n    height: 220,\n    padding: \"50px\",\n\n    transform: \"translate(-50%, -50%)\",\n  },\n};\n\nconst EditProfile: React.FC = () => {\n  const dispatch: AppDispatch = useDispatch();\n  const openProfile = useSelector(selectOpenProfile);\n  const profile = useSelector(selectProfile);\n  const [image, setImage] = useState<File | null>(null);\n\n  const updateProfile = async (e: React.MouseEvent<HTMLElement>) => {\n    e.preventDefault();\n    const packet = { id: profile.id, nickName: profile.nickName, img: image };\n\n    await dispatch(fetchCredStart());\n    await dispatch(fetchAsyncUpdateProf(packet));\n    await dispatch(fetchCredEnd());\n    await dispatch(resetOpenProfile());\n  };\n\n  const handlerEditPicture = () => {\n    const fileInput = document.getElementById(\"imageInput\");\n    fileInput?.click();\n  };\n\n  return (\n    <>\n      <Modal\n        isOpen={openProfile}\n        onRequestClose={async () => {\n          await dispatch(resetOpenProfile());\n        }}\n        style={customStyles}\n      >\n        <form className={styles.core_signUp}>\n          <h1 className={styles.core_title}>SNS clone</h1>\n\n          <br />\n          <TextField\n            placeholder=\"nickname\"\n            type=\"text\"\n            value={profile?.nickName}\n            onChange={(e) => dispatch(editNickname(e.target.value))}\n          />\n\n          <input\n            type=\"file\"\n            id=\"imageInput\"\n            hidden={true}\n            onChange={(e) => setImage(e.target.files![0])}\n          />\n          <br />\n          <IconButton onClick={handlerEditPicture}>\n            <MdAddAPhoto />\n          </IconButton>\n          <br />\n          <Button\n            disabled={!profile?.nickName}\n            variant=\"contained\"\n            color=\"primary\"\n            type=\"submit\"\n            onClick={updateProfile}\n          >\n            Update\n          </Button>\n        </form>\n      </Modal>\n    </>\n  );\n};\n\nexport default EditProfile;\n"]},"metadata":{},"sourceType":"module"}