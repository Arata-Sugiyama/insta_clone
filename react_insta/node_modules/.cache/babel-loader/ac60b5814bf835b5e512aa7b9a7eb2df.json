{"ast":null,"code":"var _jsxFileName = \"/Users/sugiyamaarata/Documents/react_insta/src/features/auth/Auth.tsx\";\nimport React from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styles from \"./Auth.module.css\";\nimport Modal from \"react-modal\";\nimport { Formik } from \"formik\";\nimport { object, string } from \"yup\";\nimport { TextField, Button, CircularProgress } from \"@material-ui/core\";\nimport { selectIsLoadingAuth, selectOpenSignIn, selectOpenSignUp, setOpenSignIn, resetOpenSignIn, setOpenSignUp, resetOpenSignUp, fetchCredStart, fetchCredEnd, fetchAsyncLogin, fetchAsyncRegister, fetchAsyncGetMyProf, fetchAsyncGetProfs, fetchAsyncCreateProf } from \"./authSlice\";\nimport { fetchAsyncGetPosts, fetchAsyncGetComments } from \"../post/postSlice\";\nconst customStyles = {\n  overlay: {\n    backgroundColor: \"#777777\"\n  },\n  content: {\n    top: \"55%\",\n    left: \"50%\",\n    width: 280,\n    height: 350,\n    padding: \"50px\",\n    transform: \"translate(-50%, -50%)\"\n  }\n};\n\nconst Auth = () => {\n  Modal.setAppElement(\"#root\");\n  const openSignIn = useSelector(selectOpenSignIn);\n  const openSignUp = useSelector(selectOpenSignUp);\n  const isLoadingAuth = useSelector(selectIsLoadingAuth);\n  const dispatch = useDispatch();\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Modal, {\n    isOpen: openSignUp,\n    onRequestClose: async () => {\n      await dispatch(resetOpenSignUp());\n    },\n    style: customStyles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    initialErrors: {\n      email: \"required\"\n    },\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    onSubmit: async values => {\n      await dispatch(fetchCredStart());\n      const resultReg = await dispatch(fetchAsyncRegister(values));\n\n      if (fetchAsyncRegister.fulfilled.match(resultReg)) {\n        await dispatch(fetchAsyncLogin(values));\n        await dispatch(fetchAsyncCreateProf({\n          nickName: \"annonymous\"\n        }));\n        await dispatch(fetchAsyncGetProfs());\n        await dispath(fetchAsyncGetPosts());\n        await dispatch(fetchAsyncGetComments());\n        await dispatch(fetchAsyncGetMyProf());\n      }\n\n      await dispatch(fetchCredEnd());\n      await dispatch(resetOpenSignUp());\n    },\n    validationSchema: object().shape({\n      email: string().email(\"email format is wrong\").required(\"email is must\"),\n      password: string().required(\"password is must\").min(4)\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, ({\n    handleSubmit,\n    handleChange,\n    handleBlur,\n    values,\n    touched,\n    isValid,\n    errors\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.auth_signUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.auth_title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, \"SNS_clone\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.auth_progress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  }, isLoadingAuth && /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 23\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    placeholder: \"email\",\n    type: \"input\",\n    name: \"email\",\n    onChange: handleChange,\n    onBlur: handleBlur,\n    value: values.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 5\n    }\n  }), touched.email && errors.email ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.auth_error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, errors.email) : null, /*#__PURE__*/React.createElement(TextField, {\n    placeholder: \"password\",\n    type: \"password\",\n    name: \"password\",\n    onChange: handleChange,\n    onBlur: handleBlur,\n    value: values.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 5\n    }\n  }), touched.password && errors.password ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.auth_error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }\n  }, errors.password) : null, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: !isValid,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 5\n    }\n  }, \"Register\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.auth_text,\n    onClick: async () => {\n      await dispatch(setOpenSignIn());\n      await dispatch(resetOpenSignUp());\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 5\n    }\n  }, \"You already have a account?\")))))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: openSignIn,\n    onRequestClose: async () => {\n      await dispatch(resetOpenSignIn());\n    },\n    style: customStyles,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Formik, {\n    initialErrors: {\n      email: \"required\"\n    },\n    initialValues: {\n      email: \"\",\n      password: \"\"\n    },\n    onSubmit: async values => {\n      await dispatch(fetchCredStart());\n      const result = await dispatch(fetchAsyncLogin(values));\n\n      if (fetchAsyncLogin.fulfilled.match(result)) {\n        await dispatch(fetchAsyncGetProfs());\n        await dispatch(fetchAsyncGetPosts());\n        await dispatch(fetchAsyncGetComments());\n        await dispatch(fetchAsyncGetMyProf());\n      }\n\n      await dispatch(fetchCredEnd());\n      await dispatch(resetOpenSignIn());\n    },\n    validationSchema: object().shape({\n      email: string().email(\"email format is wrong\").required(\"email is must\"),\n      passeord: string().required(\"passeord is must\").min(4)\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 5\n    }\n  }, ({\n    handleSubmit,\n    handleChange,\n    handleBlur,\n    values,\n    errors,\n    touched,\n    isValid\n  }) => /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.auth_signUp,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    className: styles.auth_title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 7\n    }\n  }, \"SNS_clone\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.auth_progress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }\n  }, isLoadingAuth && /*#__PURE__*/React.createElement(CircularProgress, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    placeholder: \"email\",\n    type: \"input\",\n    name: \"email\",\n    onChange: handleChange,\n    onBlur: handleBlur,\n    value: values.email,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }\n  }), touched.email && errors.email ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.auth_error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, errors.email) : null, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(TextField, {\n    placeholder: \"password\",\n    type: \"password\",\n    name: \"password\",\n    onChange: handleChange,\n    onBlur: handleBlur,\n    value: values.password,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }\n  }), touched.password && errors.password ? /*#__PURE__*/React.createElement(\"div\", {\n    className: styles.auth_error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }\n  }, errors.password) : null, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    variant: \"contained\",\n    color: \"primary\",\n    disabled: !isValid,\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    className: styles.auth_text,\n    onClick: async () => {\n      await dispatch(resetOpenSignIn());\n      await dispatch(setOpenSignUp());\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 7\n    }\n  }, \"You already have a account?\")))))));\n};\n\nexport default Auth;","map":{"version":3,"sources":["/Users/sugiyamaarata/Documents/react_insta/src/features/auth/Auth.tsx"],"names":["React","useSelector","useDispatch","styles","Modal","Formik","object","string","TextField","Button","CircularProgress","selectIsLoadingAuth","selectOpenSignIn","selectOpenSignUp","setOpenSignIn","resetOpenSignIn","setOpenSignUp","resetOpenSignUp","fetchCredStart","fetchCredEnd","fetchAsyncLogin","fetchAsyncRegister","fetchAsyncGetMyProf","fetchAsyncGetProfs","fetchAsyncCreateProf","fetchAsyncGetPosts","fetchAsyncGetComments","customStyles","overlay","backgroundColor","content","top","left","width","height","padding","transform","Auth","setAppElement","openSignIn","openSignUp","isLoadingAuth","dispatch","email","password","values","resultReg","fulfilled","match","nickName","dispath","shape","required","min","handleSubmit","handleChange","handleBlur","touched","isValid","errors","auth_signUp","auth_title","auth_progress","auth_error","auth_text","result","passeord"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { AppDispatch } from \"../../app/store\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styles from \"./Auth.module.css\";\nimport Modal from \"react-modal\";\nimport { Formik } from \"formik\";\nimport { object, string } from \"yup\"\nimport { TextField, Button, CircularProgress } from \"@material-ui/core\";\nimport {\n  selectIsLoadingAuth,\n  selectOpenSignIn,\n  selectOpenSignUp,\n  setOpenSignIn,\n  resetOpenSignIn,\n  setOpenSignUp,\n  resetOpenSignUp,\n  fetchCredStart,\n  fetchCredEnd,\n  fetchAsyncLogin,\n  fetchAsyncRegister,\n  fetchAsyncGetMyProf,\n  fetchAsyncGetProfs,\n  fetchAsyncCreateProf,\n} from \"./authSlice\";\n\nimport {fetchAsyncGetPosts, fetchAsyncGetComments } from \"../post/postSlice\";\n\n\nconst customStyles = {\n  overlay:{\n    backgroundColor:\"#777777\",\n  },\n  content:{\n    top:\"55%\",\n    left:\"50%\",\n\n    width: 280,\n    height: 350,\n    padding: \"50px\",\n\n    transform: \"translate(-50%, -50%)\",\n  },\n};\n\nconst Auth: React.FC = () =>{\n  Modal.setAppElement(\"#root\");\n  const openSignIn = useSelector(selectOpenSignIn);\n  const openSignUp = useSelector(selectOpenSignUp);\n  const isLoadingAuth = useSelector(selectIsLoadingAuth);\n  const dispatch: AppDispatch = useDispatch();\n\n  return (\n    <>\n    <Modal\n    isOpen={openSignUp}\n    onRequestClose={async () => {\n      await dispatch(resetOpenSignUp());\n    }}\n    style={customStyles}\n    >\n    <Formik\n    initialErrors={{ email: \"required\" }}\n    initialValues={{ email: \"\", password: \"\" }}\n    onSubmit={async (values) =>{\n      await dispatch(fetchCredStart());\n      const resultReg = await dispatch(fetchAsyncRegister(values));\n\n      if (fetchAsyncRegister.fulfilled.match(resultReg)){\n        await dispatch(fetchAsyncLogin(values));\n        await dispatch(fetchAsyncCreateProf({nickName:\"annonymous\"}));\n\n        await dispatch(fetchAsyncGetProfs());\n        await dispath(fetchAsyncGetPosts());\n        await dispatch(fetchAsyncGetComments());\n        await dispatch(fetchAsyncGetMyProf());\n      }\n      await dispatch(fetchCredEnd());\n      await dispatch(resetOpenSignUp());\n    }}\n\n    validationSchema={object().shape({\n      email: string()\n      .email(\"email format is wrong\")\n      .required(\"email is must\"),\n      password: string().required(\"password is must\").min(4),\n    })}\n    >\n    {({\n      handleSubmit,\n      handleChange,\n      handleBlur,\n      values,\n      touched,\n      isValid,\n      errors\n    }) => (<div>\n    <form onSubmit={handleSubmit}>\n    <div className={styles.auth_signUp}>\n    <h1 className={styles.auth_title}>SNS_clone</h1>\n    <br />\n    <div className={styles.auth_progress}>\n    {isLoadingAuth && <CircularProgress />}\n    </div>\n    <br />\n    <TextField\n    placeholder=\"email\"\n    type=\"input\"\n    name=\"email\"\n    onChange={handleChange}\n    onBlur={handleBlur}\n    value={values.email}\n    />\n    <br />\n    {touched.email && errors.email ? (\n      <div className={styles.auth_error}>{errors.email}</div>\n    ) : null}\n\n    <TextField\n    placeholder=\"password\"\n    type=\"password\"\n    name=\"password\"\n    onChange={handleChange}\n    onBlur={handleBlur}\n    value={values.password}\n    />\n    <br />\n    {touched.password && errors.password ? (\n      <div className={styles.auth_error}>{errors.password}</div>\n    ) : null}\n    <br />\n    <br />\n\n    <Button\n    variant=\"contained\"\n    color=\"primary\"\n    disabled={!isValid}\n    type=\"submit\">\n    Register\n    </Button>\n    <br />\n    <br />\n    <span\n    className={styles.auth_text}\n    onClick={async () => {\n      await dispatch(setOpenSignIn());\n      await dispatch(resetOpenSignUp());\n    }}\n    >\n    You already have a account?\n    </span>\n    </div>\n    </form>\n    </div>\n  )}\n    </Formik>\n    </Modal>\n\n    <Modal\n    isOpen={openSignIn}\n    onRequestClose={async () => {\n      await dispatch(resetOpenSignIn());\n    }}\n    style={customStyles}\n    >\n    <Formik\n    initialErrors={{ email: \"required\"}}\n    initialValues={{ email: \"\" , password: \"\" }}\n    onSubmit={async (values)=>{\n      await dispatch(fetchCredStart());\n      const result = await dispatch(fetchAsyncLogin(values));\n      if (fetchAsyncLogin.fulfilled.match(result)){\n        await dispatch(fetchAsyncGetProfs());\n        await dispatch(fetchAsyncGetPosts());\n        await dispatch(fetchAsyncGetComments());\n        await dispatch(fetchAsyncGetMyProf());\n      }\n      await dispatch(fetchCredEnd());\n      await dispatch(resetOpenSignIn());\n    }}\n    validationSchema={object().shape({\n      email: string()\n      .email(\"email format is wrong\")\n      .required(\"email is must\"),\n      passeord: string().required(\"passeord is must\").min(4),\n    })}\n    >\n    {({\n      handleSubmit,\n      handleChange,\n      handleBlur,\n      values,\n      errors,\n      touched,\n      isValid,\n    }) => (\n      <div>\n      <form onSubmit={handleChange}>\n      <div className={styles.auth_signUp}>\n      <h1 className={styles.auth_title}>SNS_clone</h1>\n      <br />\n      <div className={styles.auth_progress}>\n      {isLoadingAuth && <CircularProgress />}\n      </div>\n      <br />\n      <TextField\n      placeholder=\"email\"\n      type=\"input\"\n      name=\"email\"\n      onChange={handleChange}\n      onBlur={handleBlur}\n      value={values.email}\n      />\n      {touched.email && errors.email ? (\n        <div className={styles.auth_error}>{errors.email}</div>\n      ) : null}\n      <br />\n\n      <TextField\n      placeholder=\"password\"\n      type=\"password\"\n      name=\"password\"\n      onChange={handleChange}\n      onBlur={handleBlur}\n      value={values.password}\n      />\n\n      {touched.password && errors.password ? (\n        <div className={styles.auth_error}>{errors.password}</div>\n      ) : null}\n      <br />\n      <br />\n      <Button\n      variant=\"contained\"\n      color=\"primary\"\n      disabled={!isValid}\n      type=\"submit\">\n      Login\n      </Button>\n      <br />\n      <br />\n      <span\n      className={styles.auth_text}\n      onClick={async () => {\n        await dispatch(resetOpenSignIn());\n        await dispatch(setOpenSignUp());\n      }}\n      >\n      You already have a account?\n      </span>\n      </div>\n      </form>\n      </div >\n\n    )}\n    </Formik>\n\n    </Modal>\n    </>\n  );\n};\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}