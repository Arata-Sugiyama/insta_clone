{"ast":null,"code":"import _regeneratorRuntime from\"/Users/sugiyamaarata/Documents/react_insta/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/sugiyamaarata/Documents/react_insta/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import{useSelector,useDispatch}from\"react-redux\";import styles from\"./Auth.module.css\";import Modal from\"react-modal\";import{Formik}from\"formik\";import{object,string}from\"yup\";import{TextField,Button,CircularProgress}from\"@material-ui/core\";import{selectIsLoadingAuth,selectOpenSignIn,selectOpenSignUp,setOpenSignIn,resetOpenSignIn,setOpenSignUp,resetOpenSignUp,fetchCredStart,fetchCredEnd,fetchAsyncLogin,fetchAsyncRegister,fetchAsyncGetMyProf,fetchAsyncGetProfs,fetchAsyncCreateProf}from\"./authSlice\";var customStyles={overlay:{backgroundColor:\"#777777\"},content:{top:\"55%\",left:\"50%\",width:280,height:350,padding:\"50px\",transform:\"translate(-50%, -50%)\"}};var Auth=function Auth(){Modal.setAppElement(\"#root\");var openSignIn=useSelector(selectOpenSignIn);var openSignUp=useSelector(selectOpenSignUp);var isLoadingAuth=useSelector(selectIsLoadingAuth);var dispatch=useDispatch();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Modal,{isOpen:openSignUp,onRequestClose:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return dispatch(resetOpenSignUp());case 2:case\"end\":return _context.stop();}}},_callee);})),style:customStyles},/*#__PURE__*/React.createElement(Formik,{initialErrors:{email:\"required\"},initialValues:{email:\"\",password:\"\"},onSubmit:/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(values){var resultReg;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return dispatch(fetchCredStart());case 2:_context2.next=4;return dispatch(fetchAsyncRegister(values));case 4:resultReg=_context2.sent;if(!fetchAsyncRegister.fulfilled.match(resultReg)){_context2.next=14;break;}_context2.next=8;return dispatch(fetchAsyncLogin(values));case 8:_context2.next=10;return dispatch(fetchAsyncCreateProf({nickName:\"annonymous\"}));case 10:_context2.next=12;return dispatch(fetchAsyncGetProfs());case 12:_context2.next=14;return dispatch(fetchAsyncGetMyProf());case 14:_context2.next=16;return dispatch(fetchCredEnd());case 16:_context2.next=18;return dispatch(resetOpenSignUp());case 18:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}(),validationSchema:object().shape({email:string().email(\"email format is wrong\").required(\"email is must\"),password:string().required(\"password is must\").min(4)})},function(_ref3){var handleSubmit=_ref3.handleSubmit,handleChange=_ref3.handleChange,handleBlur=_ref3.handleBlur,values=_ref3.values,touched=_ref3.touched,isValid=_ref3.isValid,errors=_ref3.errors;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:styles.auth_signUp},/*#__PURE__*/React.createElement(\"h1\",{className:styles.auth_title},\"SNS_clone\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:styles.auth_progress},isLoadingAuth&&/*#__PURE__*/React.createElement(CircularProgress,null)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(TextField,{placeholder:\"email\",type:\"input\",name:\"email\",onChange:handleChange,onBlur:handleBlur,value:values.email}),/*#__PURE__*/React.createElement(\"br\",null),touched.email&&errors.email?/*#__PURE__*/React.createElement(\"div\",{className:styles.auth_error},errors.email):null,/*#__PURE__*/React.createElement(TextField,{placeholder:\"password\",type:\"password\",name:\"password\",onChange:handleChange,onBlur:handleBlur,value:values.password}),/*#__PURE__*/React.createElement(\"br\",null),touched.password&&errors.password?/*#__PURE__*/React.createElement(\"div\",{className:styles.auth_error},errors.password):null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",disabled:!isValid,type:\"submit\"},\"Register\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:styles.auth_text,onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return dispatch(setOpenSignIn());case 2:_context3.next=4;return dispatch(resetOpenSignUp());case 4:case\"end\":return _context3.stop();}}},_callee3);}))},\"You already have a account?\"))));},\"}\")),/*#__PURE__*/React.createElement(Modal,{isOpen:openSignIn,onRequestClose:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return dispatch(resetOpenSignIn());case 2:case\"end\":return _context4.stop();}}},_callee4);})),style:customStyles},/*#__PURE__*/React.createElement(Formik,{initialErrors:{email:\"required\"},initialValues:{email:\"\",password:\"\"},onSubmit:/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(values){var result;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.next=2;return dispatch(fetchCredStart());case 2:_context5.next=4;return dispatch(fetchAsyncLogin(values));case 4:result=_context5.sent;if(!fetchAsyncLogin.fulfilled.match(result)){_context5.next=10;break;}_context5.next=8;return dispatch(fetchAsyncGetProfs());case 8:_context5.next=10;return dispatch(fetchAsyncGetMyProf());case 10:_context5.next=12;return dispatch(fetchCredEnd());case 12:_context5.next=14;return dispatch(resetOpenSignIn());case 14:case\"end\":return _context5.stop();}}},_callee5);}));return function(_x2){return _ref6.apply(this,arguments);};}(),validationSchema:object().shape({email:string().email(\"email format is wrong\").required(\"email is must\"),passeord:string().required(\"passeord is must\").min(4)})},function(_ref7){var handleSubmit=_ref7.handleSubmit,handleChange=_ref7.handleChange,handleBlur=_ref7.handleBlur,values=_ref7.values,errors=_ref7.errors,touched=_ref7.touched,isValid=_ref7.isValid;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleChange},/*#__PURE__*/React.createElement(\"div\",{className:styles.auth_signUp},/*#__PURE__*/React.createElement(\"h1\",{className:styles.auth_title},\"SNS_clone\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"div\",{className:styles.auth_progress},isLoadingAuth&&/*#__PURE__*/React.createElement(CircularProgress,null)),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(TextField,{placeholder:\"email\",type:\"input\",name:\"email\",onChange:handleChange,onBlur:handleBlur,value:values.email}),touched.email&&errors.email?/*#__PURE__*/React.createElement(\"div\",{className:styles.auth_error},errors.email):null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(TextField,{placeholder:\"password\",type:\"password\",name:\"password\",onChange:handleChange,onBlur:handleBlur,value:values.password}),touched.password&&errors.password?/*#__PURE__*/React.createElement(\"div\",{className:styles.auth_error},errors.password):null,/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",disabled:!isValid,type:\"submit\"},\"Login\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"span\",{className:styles.auth_text,onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:_context6.next=2;return dispatch(resetOpenSignIn());case 2:_context6.next=4;return dispatch(setOpenSignUp());case 4:case\"end\":return _context6.stop();}}},_callee6);}))},\"You already have a account?\"))));})));};export default Auth;","map":{"version":3,"sources":["/Users/sugiyamaarata/Documents/react_insta/src/features/auth/Auth.tsx"],"names":["React","useSelector","useDispatch","styles","Modal","Formik","object","string","TextField","Button","CircularProgress","selectIsLoadingAuth","selectOpenSignIn","selectOpenSignUp","setOpenSignIn","resetOpenSignIn","setOpenSignUp","resetOpenSignUp","fetchCredStart","fetchCredEnd","fetchAsyncLogin","fetchAsyncRegister","fetchAsyncGetMyProf","fetchAsyncGetProfs","fetchAsyncCreateProf","customStyles","overlay","backgroundColor","content","top","left","width","height","padding","transform","Auth","setAppElement","openSignIn","openSignUp","isLoadingAuth","dispatch","email","password","values","resultReg","fulfilled","match","nickName","shape","required","min","handleSubmit","handleChange","handleBlur","touched","isValid","errors","auth_signUp","auth_title","auth_progress","auth_error","auth_text","result","passeord"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { AppDispatch } from \"../../app/store\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport styles from \"./Auth.module.css\";\nimport Modal from \"react-modal\";\nimport { Formik } from \"formik\";\nimport { object, string } from \"yup\"\nimport { TextField, Button, CircularProgress } from \"@material-ui/core\";\nimport {\n  selectIsLoadingAuth,\n  selectOpenSignIn,\n  selectOpenSignUp,\n  setOpenSignIn,\n  resetOpenSignIn,\n  setOpenSignUp,\n  resetOpenSignUp,\n  fetchCredStart,\n  fetchCredEnd,\n  fetchAsyncLogin,\n  fetchAsyncRegister,\n  fetchAsyncGetMyProf,\n  fetchAsyncGetProfs,\n  fetchAsyncCreateProf,\n} from \"./authSlice\";\n\nconst customStyles = {\n  overlay:{\n    backgroundColor:\"#777777\",\n  },\n  content:{\n    top:\"55%\",\n    left:\"50%\",\n\n    width: 280,\n    height: 350,\n    padding: \"50px\",\n\n    transform: \"translate(-50%, -50%)\",\n  },\n};\n\nconst Auth: React.FC = () =>{\n  Modal.setAppElement(\"#root\");\n  const openSignIn = useSelector(selectOpenSignIn);\n  const openSignUp = useSelector(selectOpenSignUp);\n  const isLoadingAuth = useSelector(selectIsLoadingAuth);\n  const dispatch: AppDispatch = useDispatch();\n\n  return (\n    <>\n    <Modal\n    isOpen={openSignUp}\n    onRequestClose={async () => {\n      await dispatch(resetOpenSignUp());\n    }}\n    style={customStyles}\n    >\n    <Formik\n    initialErrors={{ email: \"required\" }}\n    initialValues={{ email: \"\", password: \"\" }}\n    onSubmit={async (values) =>{\n      await dispatch(fetchCredStart());\n      const resultReg = await dispatch(fetchAsyncRegister(values));\n\n      if (fetchAsyncRegister.fulfilled.match(resultReg)){\n        await dispatch(fetchAsyncLogin(values));\n        await dispatch(fetchAsyncCreateProf({nickName:\"annonymous\"}));\n\n        await dispatch(fetchAsyncGetProfs());\n        //await dispath(fetchAsyncGetPosts());\n        //await dispatch(fetchAsyncGetComments());\n        await dispatch(fetchAsyncGetMyProf());\n      }\n      await dispatch(fetchCredEnd());\n      await dispatch(resetOpenSignUp());\n    }}\n\n    validationSchema={object().shape({\n      email: string()\n      .email(\"email format is wrong\")\n      .required(\"email is must\"),\n      password: string().required(\"password is must\").min(4),\n    })}\n    >\n    {({\n      handleSubmit,\n      handleChange,\n      handleBlur,\n      values,\n      touched,\n      isValid,\n      errors\n    }) => <div>\n    <form onSubmit={handleSubmit}>\n    <div className={styles.auth_signUp}>\n    <h1 className={styles.auth_title}>SNS_clone</h1>\n    <br />\n    <div className={styles.auth_progress}>\n    {isLoadingAuth && <CircularProgress />}\n    </div>\n    <br />\n    <TextField\n    placeholder=\"email\"\n    type=\"input\"\n    name=\"email\"\n    onChange={handleChange}\n    onBlur={handleBlur}\n    value={values.email}\n    />\n    <br />\n    {touched.email && errors.email ? (\n      <div className={styles.auth_error}>{errors.email}</div>\n    ) : null}\n\n    <TextField\n    placeholder=\"password\"\n    type=\"password\"\n    name=\"password\"\n    onChange={handleChange}\n    onBlur={handleBlur}\n    value={values.password}\n    />\n    <br />\n    {touched.password && errors.password ? (\n      <div className={styles.auth_error}>{errors.password}</div>\n    ) : null}\n    <br />\n    <br />\n\n    <Button\n    variant=\"contained\"\n    color=\"primary\"\n    disabled={!isValid}\n    type=\"submit\">\n    Register\n    </Button>\n    <br />\n    <br />\n    <span\n    className={styles.auth_text}\n    onClick={async () => {\n      await dispatch(setOpenSignIn());\n      await dispatch(resetOpenSignUp());\n    }}\n    >\n    You already have a account?\n    </span>\n    </div>\n    </form>\n    </div>\n  }}\n    </Formik>\n    </Modal>\n\n    <Modal\n    isOpen={openSignIn}\n    onRequestClose={async () => {\n      await dispatch(resetOpenSignIn());\n    }}\n    style={customStyles}\n    >\n    <Formik\n    initialErrors={{ email: \"required\"}}\n    initialValues={{ email: \"\" , password: \"\" }}\n    onSubmit={async (values)=>{\n      await dispatch(fetchCredStart());\n      const result = await dispatch(fetchAsyncLogin(values));\n      if (fetchAsyncLogin.fulfilled.match(result)){\n        await dispatch(fetchAsyncGetProfs());\n        //await dispatch(fetchAsyncGetPosts());\n        //await dispatch(fetchAsyncGetComments());\n        await dispatch(fetchAsyncGetMyProf());\n      }\n      await dispatch(fetchCredEnd());\n      await dispatch(resetOpenSignIn());\n    }}\n    validationSchema={object().shape({\n      email: string()\n      .email(\"email format is wrong\")\n      .required(\"email is must\"),\n      passeord: string().required(\"passeord is must\").min(4),\n    })}\n    >\n    {({\n      handleSubmit,\n      handleChange,\n      handleBlur,\n      values,\n      errors,\n      touched,\n      isValid,\n    }) => (\n      <div>\n      <form onSubmit={handleChange}>\n      <div className={styles.auth_signUp}>\n      <h1 className={styles.auth_title}>SNS_clone</h1>\n      <br />\n      <div className={styles.auth_progress}>\n      {isLoadingAuth && <CircularProgress />}\n      </div>\n      <br />\n      <TextField\n      placeholder=\"email\"\n      type=\"input\"\n      name=\"email\"\n      onChange={handleChange}\n      onBlur={handleBlur}\n      value={values.email}\n      />\n      {touched.email && errors.email ? (\n        <div className={styles.auth_error}>{errors.email}</div>\n      ) : null}\n      <br />\n\n      <TextField\n      placeholder=\"password\"\n      type=\"password\"\n      name=\"password\"\n      onChange={handleChange}\n      onBlur={handleBlur}\n      value={values.password}\n      />\n\n      {touched.password && errors.password ? (\n        <div className={styles.auth_error}>{errors.password}</div>\n      ) : null}\n      <br />\n      <br />\n      <Button\n      variant=\"contained\"\n      color=\"primary\"\n      disabled={!isValid}\n      type=\"submit\">\n      Login\n      </Button>\n      <br />\n      <br />\n      <span\n      className={styles.auth_text}\n      onClick={async () => {\n        await dispatch(resetOpenSignIn());\n        await dispatch(setOpenSignUp());\n      }}\n      >\n      You already have a account?\n      </span>\n      </div>\n      </form>\n      </div >\n\n    )}\n    </Formik>\n\n    </Modal>\n    </>\n  );\n};\n\nexport default Auth;\n"]},"metadata":{},"sourceType":"module"}